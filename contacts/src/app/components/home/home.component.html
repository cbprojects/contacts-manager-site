<p-toast></p-toast>

<div class="top" onclick="$('html, body').animate( { scrollTop : 0 }, 800 );">
	<i class="material-icons">arrow_upward</i>
</div>

<div class="wrapper">
	<!-- HEADER -->
	<app-sidebar></app-sidebar>
	<!-- HEADER -->

	<div class="main-panel">
		<!-- HEADER -->
		<app-header></app-header>
		<!-- HEADER -->

		<!-- CONTENT -->
		<div class="content">
			<div class="container-fluid">
				<!-- Contadores -->
				<div class="row">
					<div class="col-lg-6 col-md-6 col-sm-6">
						<div class="card card-stats">
							<div class="card-header card-header-info card-header-icon">
								<div class="card-icon">
									<i class="material-icons">support_agent</i>
								</div>
								<p class="card-category">{{msg.lbl_resumen}}</p>
								<h3 class="card-title">30/{{contactosActivos}}
									<small>{{msg.lbl_clientes}}</small>
								</h3>
							</div>
							<div class="card-footer">
								<div class="stats">
									<i class="material-icons text-info">search</i>
									<a routerLink="/q-contacto">{{msg.lbl_gestiona_contactos}}</a>
								</div>
							</div>
						</div>
					</div>
					<div class="col-lg-3 col-md-6 col-sm-6">
						<div class="card card-stats">
							<div class="card-header card-header-danger card-header-icon">
								<div class="card-icon">
									<i class="material-icons">store</i>
								</div>
								<p class="card-category">{{msg.lbl_empresas}}</p>
								<h3 class="card-title">+{{empresasActivas}}</h3>
							</div>
							<div class="card-footer">
								<div class="stats">
									<i class="material-icons">update</i>{{msg.lbl_actualizado_ahora}}
								</div>
							</div>
						</div>
					</div>
					<div class="col-lg-3 col-md-6 col-sm-6">
						<div class="card card-stats">
							<div class="card-header card-header-success card-header-icon">
								<div class="card-icon">
									<i class="fa fa-users"></i>
								</div>
								<p class="card-category">{{msg.lbl_contactos}}</p>
								<h3 class="card-title">+{{contactosActivos}}</h3>
							</div>
							<div class="card-footer">
								<div class="stats">
									<i class="material-icons">update</i>{{msg.lbl_actualizado_ahora}}
								</div>
							</div>
						</div>
					</div>
				</div>
				<!-- Empresas -->
				<div class="row" *ngIf="listaEmpresas.length > 0; else sinResultados">
					<div *ngFor="let empresa of listaEmpresas; index as i;" class="col-md-6">
						<div class="card card-chart">
							<div class="card-header card-header-danger cursorPointer">
								<div class="ct-chart">
									<img width="100%" height="200px"
										src="assets/images/empresas/{{empresa.idEmpresa}}.jpg" />
								</div>
							</div>
							<div class="card-body">
								<h4 class="card-title">{{empresa.nombre}}</h4>
								<p class="card-category">{{empresa.descripcion}}</p>
								<button *ngIf="contactoEnSesionTB !== undefined && contactoEnSesionTB !== null"
									type="submit" (click)="enviarRestEmailFactura(empresa)"
									class="btn btn-danger">{{msg.lbl_btn_enviar_factura}}</button>
								<div class="clearfix"></div>
							</div>
							<div class="card-footer">
								<div class="stats">
									<i class="material-icons">location_on</i> {{empresa.ciudad}}
									<i class="material-icons">phone</i> {{empresa.telefono}}
									<i class="material-icons">mail</i> {{empresa.correo}}
								</div>
							</div>
						</div>
					</div>
				</div>
				<ng-template #sinResultados>
					<div class="service-grids">
						<div class="col-md-12 ser-grid">
							<p class="sinResultados">
								{{msg.lbl_info_sin_resultados}}</p>
						</div>
					</div>
				</ng-template>
				<!-- Graficas -->
				<div class="row displayNone">
					<div class="col-md-6">
						<div class="card card-chart">
							<div class="card-header card-header-success">
								<div class="ct-chart" id="chart1">
									<p-chart type="line" [data]="dataChart1" [options]="basicOptions"></p-chart>
								</div>
							</div>
							<div class="card-body">
								<h4 class="card-title">Daily Sales</h4>
								<p class="card-category">
									<span class="text-success"><i class="fa fa-long-arrow-up"></i> 55% </span> increase
									in today sales.
								</p>
							</div>
							<div class="card-footer">
								<div class="stats">
									<i class="material-icons">access_time</i> updated 4 minutes ago
								</div>
							</div>
						</div>
					</div>
					<div class="col-md-6">
						<div class="card card-chart">
							<div class="card-header card-header-warning">
								<div class="ct-chart" id="chart2">
									<p-chart type="bar" [data]="dataChart2" [options]="basicOptions"></p-chart>
								</div>
							</div>
							<div class="card-body">
								<h4 class="card-title">Email Subscriptions</h4>
								<p class="card-category">Last Campaign Performance</p>
							</div>
							<div class="card-footer">
								<div class="stats">
									<i class="material-icons">access_time</i> campaign sent 2 days ago
								</div>
							</div>
						</div>
					</div>
					<div class="col-md-6">
						<div class="card card-chart">
							<div class="card-header card-header-danger">
								<div class="ct-chart" id="chart3">
									<p-chart type="line" [data]="dataChart3" [options]="basicOptions"></p-chart>
								</div>
							</div>
							<div class="card-body">
								<h4 class="card-title">Completed Tasks</h4>
								<p class="card-category">Last Campaign Performance</p>
							</div>
							<div class="card-footer">
								<div class="stats">
									<i class="material-icons">access_time</i> campaign sent 2 days ago
								</div>
							</div>
						</div>
					</div>
					<div class="col-md-6">
						<div class="card card-chart">
							<div class="card-header card-header-info">
								<div class="ct-chart" id="chart4">
									<p-chart type="bar" [data]="dataChart4" [options]="basicOptions"></p-chart>
								</div>
							</div>
							<div class="card-body">
								<h4 class="card-title">Completed Tasks</h4>
								<p class="card-category">Last Campaign Performance</p>
							</div>
							<div class="card-footer">
								<div class="stats">
									<i class="material-icons">access_time</i> campaign sent 2 days ago
								</div>
							</div>
						</div>
					</div>
				</div>
				<!-- Tareas -->
				<div class="row">
					<div class="col-lg-12 col-md-12">
						<div class="card">
							<div class="card-header card-header-tabs card-header-primary">
								<div class="nav-tabs-navigation">
									<div class="nav-tabs-wrapper">
										<ul class="nav nav-tabs" data-tabs="tabs">
											<li class="nav-item">
												<a class="nav-link active" href="#" data-toggle="tab">
													<i class="material-icons">add_task</i> {{msg.lbl_tareas}}
													<div class="ripple-container"></div>
												</a>
											</li>
										</ul>
									</div>
								</div>
							</div>
							<div class="card-body">
								<div class="tab-content">
									<div class="tab-pane active" id="profile">
										<table class="table" *ngIf="listaTareas.length > 0; else sinResultados"
											class="table">
											<tbody>
												<tr *ngFor="let tarea of listaTareas; index as i;">
													<td style="width: 50px;" class="text-center">
														<p-checkbox (onChange)="actualizarTareaRealizada(tarea.tareaTB)"
															[(ngModel)]="tarea.tareaTB.realizado" binary="true"
															inputId="binary">
														</p-checkbox>
													</td>
													<td>{{tarea.tareaTB.descripcion}}</td>
												</tr>
											</tbody>
										</table>
										<ng-template #sinResultados>
											<div class="service-grids">
												<div class="col-md-12 ser-grid">
													<p class="sinResultados">
														{{msg.lbl_info_sin_resultados}}</p>
												</div>
											</div>
										</ng-template>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<!-- CONTENT -->

		<!-- FOOTER -->
		<app-footer></app-footer>
		<!-- FOOTER -->
	</div>
</div>